/**
 * Created by kevin on 7/7/15.
 */
import Configuration from "Configuration";
import {Sequelize} from "sequelize";
import {SequelizeStatic} from "sequelize";
const SequelizeClass = require("sequelize");
const cls = require("continuation-local-storage");
const namespace = cls.createNamespace("cl3ver");
SequelizeClass.cls = namespace;

const sequelize: Sequelize = new SequelizeClass(
    Configuration.sequelize.db,
    Configuration.sequelize.user,
    Configuration.sequelize.pass,
    Configuration.sequelize.options
);

export interface SequelizeConnection {
    connection: Sequelize;
    Sequelize: SequelizeStatic;
    configuration: any;
}

const singleton: SequelizeConnection = {
    "configuration": Configuration.sequelize,
    "connection": sequelize,
    "Sequelize": SequelizeClass,
};

export default singleton;
