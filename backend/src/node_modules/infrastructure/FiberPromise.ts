/**
 * Created by jose on 3/10/16.
 */

const waitFor = require("wait.for");

export default function<T>(callback: () => T): Promise<T> {
    return new Promise<T>((resolve: (result: T) => void, reject: (e: Error) => void) => {
        waitFor.launchFiber(() => {
            try {
                resolve(callback());
            } catch (e) {
                reject(e);
            }
        });
    });
}
