let wait = require("wait.for");
let Promise = require("promise");
import SequelizeConnection from "infrastructure/SequelizeConnection";
export default function Transactional(operationsCb: any) {
    return SequelizeConnection.connection.transaction(function() {
        let promise = new Promise(function(resolve: any, reject: any) {
            wait.launchFiber(function() {
                try {
                    let executionData = operationsCb();
                    resolve(executionData);
                } catch (e) {
                    reject(e);
                }
            });
        });
        return promise;
    });
}
